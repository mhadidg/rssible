<!doctype html>
<html lang="en">
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/water.css@2/out/water.css">
<link rel="stylesheet" href="/css/styles.css">
<script src="/js/app.js" defer></script>
<title>RSSible: URL + CSS = RSS feed</title>

<h1>RSSible</h1>

<p>
  Paste a URL and CSS selectors; get an RSS feed;
  free and <a href="https://github.com/mhadidg/rssible">opensource</a>.
</p>
<p>
  Runs entirely on the <em>free tier</em> of
  <a href="https://workers.cloudflare.com">Cloudflare workers</a>.
  Click on the demo links ‚§∏ to see it in action.
</p>

<ul id="demos">
  <li>
    <a href="#" class="demo"
       data-config='{"url":"https://news.ycombinator.com","item":".titleline","title":"> a","link":"a","mode":"advanced","filters":"link=/github/i"}'
    >Hacker News</a>: filtered to GitHub links only
  </li>
  <li>
    <a href="#" class="demo"
       data-config='{"url":"https://www.reddit.com/r/programming/top/?t=week","item":"article","title":"faceplate-screen-reader-content","link":"[slot=\"thumbnail\"] a","mode":"lite","limit":"10"}'
    >Reddit r/programming</a>: top 10 over the past 7-days window
  </li>
  <li>
    <a href="#" class="demo"
       data-config='{"url":"https://github.com/trending?since=daily","item":"article","title":"h2","link":"h2 a","desc":"p","mode":"full","limit":"20"}'
    >Github trending repos</a>: updated daily
  </li>
  <li>
    <a href="#" class="demo"
       data-config='{"url":"https://www.imdb.com/search/title/?title_type=tv_series,tv_miniseries&num_votes=10000,&genres=sci-fi&sort=release_date,desc","item":"li.ipc-metadata-list-summary-item","title":".ipc-title","link":"a.ipc-title-link-wrapper","desc":".ipc-html-content-inner-div","mode":"full"}'
    >IMDb Sci-Fi Series</a>: latest; ‚â•10k votes
  </li>
  <li>
    <a href="#" class="demo"
       data-config='{"url":"https://www.anthropic.com/news","item":"a[href^=\"/news\"][class^=\"Card\"]","title":"h3","link":"@","date":"p","mode":"full"}'
    >Anthropic news</a> (special <code>@</code> for link means the item selector itself)
  </li>
</ul>

<form method="GET" action="/feed">
  <input name="url" placeholder="page url" required/>

  <div class="row">
    <div class="input-container item">
      <span class="sticky-text">$</span>
      <input
        name="_item" placeholder="items container (e.g., .post)"
        title="The base selector for the rest of the fields, e.g., title selector will be '{item} {title}'" required/>
    </div>
    <div class="input-container title">
      <span class="sticky-text">title</span>
      <input name="title" placeholder=".post-title"/>
    </div>
  </div>

  <div class="row">
    <div class="input-container link">
      <span class="sticky-text">link</span>
      <input name="link" placeholder=".post-title a"/>
    </div>
    <select name="mode" id="mode">
      <option value="lite" selected>üê£ Lite mode</option>
      <option value="full">üê• Full mode</option>
      <option value="advanced">ü¶Ö Advanced mode</option>
    </select>
  </div>

  <!-- Enabled only when mode=full -->
  <div class="row" id="row-full-only">
    <div class="input-container desc">
      <span class="sticky-text">desc</span>
      <input name="desc" placeholder=".post-excerpt"/>
    </div>
    <div class="input-container date">
      <span class="sticky-text">date</span>
      <input name="date" placeholder=".post-date" title="Must be parsable by JS Date()."/>
    </div>
  </div>

  <!-- Enabled only when mode=advanced -->
  <div class="row" id="row-advanced-only">
    <div class="textarea-wrapper">
      <textarea
        name="headers_text" rows="4" title="Empty headers are allowed; unsupported headers will be ignored."
        placeholder="custom headers (RFC-style, one per line):&#10;User-Agent: RSSible/1.0&#10;Accept: */*"></textarea>
      <input name="headers" type="hidden"/>
    </div>
    <div class="textarea-wrapper">
      <textarea
        name="filters" rows="4" title="Supported keys: item, title, link, desc. 'item' matches any text inside."
        placeholder="filters (JS-style, one per line; hover for keys):&#10;item=/keyword/i&#10;title=/python|rust/i"></textarea>
    </div>
  </div>

  <div class="row">
    <div class="input-container limit">
      <span class="sticky-text">limit</span>
      <input name="limit" placeholder="5" title="Max number of items to include (default 5, max 25)"/>
    </div>
    <span><!-- keep for alignment --></span>
  </div>

  <div class="row">
    <button type="button" id="preview-btn" title="Show first two items as RSS <item> nodes">Preview</button>
    <button type="submit" title="Build the RSS feed URL">Copy link</button>
  </div>
</form>

<p></p>

<small>
  <b>Important:</b> Don't repeat the <em>item</em> selector in title/link/desc/date selectors.
  Think of the <em>item</em> as the div container for, say, article, and <em>item details</em>
  as the elements <em>inside</em> each article. If multiple elements match, the first wins.<br>

  <div class="separator"></div>

  <b>Pro tip:</b> Use <code>:first-of-type</code> or <code>:nth-of-type(n)</code> if
  the selector matches multiple sibling elements <em>inside</em> the <em>item</em>.<br>

  <div class="separator"></div>

  <b>Pro tip:</b> To <em>exclude</em> items with certain words, use a negative lookahead regex.
  For example, <code>/^(?!.*(python|rust)).*$/</code> matches everything except strings
  containing "python" or "rust".<br>
</small>

<pre id="preview">
  <code>// üëÄ Your preview will show up here...</code>
</pre>

<footer class="site-footer">
  Inspired by <a href="https://github.com/kevinschaul/feedmaker/" rel="noopener noreferrer">Feedmaker</a>.
  Built by <a href="https://hadid.dev" rel="noopener noreferrer">Mustapha</a>.
</footer>
</html>
